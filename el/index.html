<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Earthquake Location - ISP Tutorial</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Earthquake Location";
    var mkdocs_page_input_path = "el.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> ISP Tutorial</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../install/">Installation</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Modules</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Earthquake Location</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pick-event">Pick Event</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#multimedia-material-pick-event">Multimedia Material (Pick Event)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#polarisation-analysis">Polarisation Analysis</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#event-location-and-focal-mechanism-fp">Event Location and Focal Mechanism (FP)</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#earth-model-viewer">Earth model Viewer</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#magnitudes-estimation">Magnitudes Estimation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#shortcuts">Shortcuts</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../tf/">Time-Frequency Analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mti/">Seismic Moment Tensor Inversion</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../aa/">Array Analysis</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../rf/">Receiver Functions</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Additional Toolboxes</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../db/">Database</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../rd/">Retrieve Data</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ppsds/">PPSDs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../synth/">Synthetic Generator</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">About</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../refs/">References</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../release_notes/">Release Notes</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="../FAQs.md">FAQs</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">ISP Tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>Earthquake Location</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="earthquake-location">Earthquake Location</h1>
<p>The module Earthquake analysis allows you to analyse waveforms, polarization analysis of seismograms 3-components, calculate different magnitudes and finally locate an event and estimate the focal mechanism (First Polarity). We will walk through all of the functionality following this scheme:</p>
<h2 id="pick-event">Pick Event</h2>
<p>From top to bottom in the left side of the window you will see,</p>
<ul>
<li>
<p>Event Info. This small box let enter information about an event, in this way you can plot the theoretical arrivals (ak-135F) with respect your seismograms.</p>
</li>
<li>
<p>Files. By clicking in this button you will place the path of your files (<em>miniseed or </em>sac).</p>
</li>
<li>
<p>Metadata. By clicking in this button you will place the path to you metadata file. The metadata file must contain the information of all of the stations seismograms you want to analyse (metadata must be a <em>xml or </em>dlsv).</p>
</li>
<li>
<p>Start Time and End Time. The time boxes can be selected checking “Trim Time”. If you choose this option all the seismograms will be cut in accordance with the selected time window.</p>
</li>
<li>
<p>Stations Info will deploy a table with the fundamental information of the seismograms.</p>
</li>
<li>
<p>Phase box. This combo box allow the selection of specific phases for picking it in the seismograms.</p>
</li>
<li>
<p>Waves box. You can Choose Body, surface, coda or noise. With this selected you can highlight a time window of the seismogram for further analysis.</p>
</li>
<li>
<p>Net, Station and Channel. You can fill this boxes (also using wildcards) to select specific files from your files folder (check “select files”).</p>
</li>
<li>
<p>Locate. After pick some phases in your seismogram you can locate an earthquake and show a location map. Previously you must have calculated travel-times for your velocity model (Further details in Event Location tab. 2.3)</p>
</li>
<li>
<p>Stations Map will show you the location of the stations that corresponds to the seismograms of your folder. The seismograms metadata must match with the metadata information.</p>
</li>
<li>
<p>Rotate. This option will rotate all your station - 3 components (must be named N,E,Z) to the GAC taking the reference the data of event info.</p>
</li>
<li>
<p>Cross. This button will compute the cross-correlation (cc) or the autocorrelation of all processed seismograms with respect the reference “Ref”, the number of the seismogram from top to bottom.</p>
</li>
<li>
<p>Process and Plot. This action will read the seismograms from the selected folder and will carry out the processing from the established “MACRO”. Further details in MACRO section "Macros".</p>
</li>
</ul>
<p><img alt="Screenshot" src="../img/EventAnalysis.png" /></p>
<p>Additional options from the toolbar are:</p>
<pre><code>                    File
</code></pre>
<p>File: New location will clean the picks that are saved automatically for be ready to compute new picking/location.
File: Write Files will write in the folder you select the processed seismograms.</p>
<p>File: Open Settings will open a window with the specific parameters of the subprocess that 
you can carry out in this module (sta/lta, wavelet detection, spectrogram, entropy…).</p>
<pre><code>                    Actions
</code></pre>
<p>Actions: Macro will deploy a window with all of the processing options. (See section 7). All of the processing options will be applied once you press the button Processing and Plot.</p>
<p>Actions: Magnitude Calculator will open a window in which you can compute different magnitudes. For open this you must have estimated an event and have selected the time-windows in the seismograms that you want the magnitudes be calculated.</p>
<p>Actions: Run Picker will carry out the automatic detection/classification of P- and S- waves from the previously loaded “Neural Network”. You must have three components per stations (named <em>N,</em>E,*Z). BE CAREFULL this computationally demanding.</p>
<p>Action: Detect event will associate the automatic picks carried out by the wavelet picker ant will declare an event. The events will be shown in the seismograms window.</p>
<p>Action: Open Earth Model Viewer will open a tool to visualize 3D velocity models. For visualize an Earth Model you need the binary files (<em>buf and  </em>hdr) created in the tab Event location. </p>
<pre><code>                    Compute
</code></pre>
<p>Compute: STA/LTA from all processed seismograms and will plot the result together. STA/LTA takes the parameters from Parameters Settings.</p>
<p>Compute: CWT (CF) from all processed seismograms and will plot the result together. CWT takes the parameters from Parameters Settings.</p>
<p>Compute: Envelope from all processed seismograms and will plot the result together. </p>
<p>Compute: Spectral Entropy from all processed seismograms and will plot the result together. Spectral entropy is estimated in small time windows see Parameters Settings.
.
All Seismograms: Plot together all seismograms.</p>
<p>Stack: Compute (linear, nth-root or PWS) stack of all processed seismograms.</p>
<pre><code>                    Go
</code></pre>
<p>Will ship you to the rest of ISP modules (RFs, Array analysis….).</p>
<h2 id="multimedia-material-pick-event">Multimedia Material (Pick Event)</h2>
<p>The following video shows a basic analysis of an earthquake
<!-- blank line --></p>
<figure class="video_container">
  <video controls="true" allowfullscreen="true" poster="../img/poster_image.png" width="740" height="400">
    <source src="../img/Earthquake_Analysis.mp4" type="video/mp4">
  </video>
</figure>
<!-- blank line -->

<h2 id="polarisation-analysis">Polarisation Analysis</h2>
<p>The Polarization Analysis is designed to analyze the three seismograms components from a station.
You can freely rotate using the rotation RT or the LQT your NEZ components an angle (Rot Angle) with an Incidence angle (Inc Angle).</p>
<p>The Particle motion of the processed seismogram is view clicking in “Plot Polarization”. This option will plot all the time window in a 3D view and in three 2D plot views.</p>
<p>If you want to make a sliding window analysis of the polarization press  “Polarization Analysis”. This will carry out a polarization analysis on windows length and frequency bandwidth specified by the user over the full analyzed seismogram.</p>
<p><img alt="Screenshot" src="../img/polarization.png" /></p>
<p>For a full particle motion analysis, press “Plot Polarization”. This will open another window with a 3D particle motion on the left and the three characteristic views on the right.</p>
<p><img alt="Screenshot" src="../img/polarization2.png" /></p>
<h2 id="event-location-and-focal-mechanism-fp">Event Location and Focal Mechanism (FP)</h2>
<p>In the Event Location Frame the user can configurate the velocity grid 1D/3D model, locate earthquakes and compute Focal Mechanisms.</p>
<p><img alt="Screenshot" src="../img/Location.png" /></p>
<p>First it is needed to set a Velocity grid framework (Grid reference and transformation type are mandatory). For now is only available Transformation Simple and Global.</p>
<p>Next, the Grid dimensions (Grid Size). Case 2D the dimension always must be 2 and the grid reference is referred to the corner SW. Case 3D the grid reference is the center of the Grid.
Choose the grid type and the wave and then generate the velocity model binary files by clicking “Generate Velocity Grid”.</p>
<p>Once the binary files are generated you can check the results in the folder:</p>
<p>ISP/earthquakeAnalysis/location_output/model</p>
<ul>
<li>Where and how place the velocity models?</li>
</ul>
<p>2D models (see example)</p>
<p>LAYER   0.0  6.1 0.0    3.49  0.0  2.7 0.0
LAYER  11.0  6.4 0.0    3.66  0.0  2.7 0.0
LAYER  24.0  6.9 0.0    3.94  0.0  2.7 0.0
LAYER  31.0  8.0 0.0    4.57  0.0  2.7 0.0</p>
<p>ISP/earthquakeAnalysis/location_output/local_models</p>
<p>3D models</p>
<p>ISP/earthquakeAnalysis/location_output /model3D (see example)</p>
<p>Every depth layer must be placed in files called, for example</p>
<p>Layer.P.mod5.mod</p>
<p>Which means that inside this file there is the grid for the layer at depth 5km.</p>
<p>The layer must be a matrix with the values in the rows from top to bottom E to W and from left to right S to W</p>
<p>The most important step is to generate the travel-times for all the stations inside the maximum distance the user determine.  Please be sure that you have load the metadata previously in seismogram analysis.</p>
<p>The generated travel-times will save in </p>
<p>ISP/earthquakeAnalysis/location_output/time</p>
<p>Once you have complete the above steps you can locate the earthquake and the focal mechanism.
**For global is not necessary generate the velocity grid and travel times.</p>
<p>To visualize the detailed Probability Density Function, press “Plot PDF” once you have already carried out the location.</p>
<p><img alt="Screenshot" src="../img/PDF.png" /></p>
<p>Moreover, if you have picked the seismic phases and have been designated the polarity in “Event frame” , you will be able to  obtain the Focal Mechanism (it uses the subprogram FocMec)</p>
<h2 id="earth-model-viewer">Earth model Viewer</h2>
<p>The Earth Model Viewer is intended to help to visualize 3D Earth velocity models as Fig 2.8.
Just select the binary file *.buf (can be generated from the model as described in previous section). Next, select the depth of the layer, the cross sections in longitude and latitude and the press plot.</p>
<p><img alt="Screenshot" src="../img/Velocity_Viewer.png" /></p>
<h2 id="magnitudes-estimation">Magnitudes Estimation</h2>
<p>With the Magnitude Estimation you can calculate:
Local Magnitude (ML) or Body-wave (mb), Surface-wave (Ms), Moment Magnitude (Mw) and Coda Magnitude.</p>
<p>To estimate the magnitudes you have to select a time window of body, surface or coda on the seismograms. </p>
<ol>
<li>Units must be on velocity, so you must remove the response of the instrument to velocity, previously to open the Magnitudes window. For Local magnitude you have to remove the response of Wood-Anderson instrument.</li>
<li>The hypocenter must be already calculated. The program will read the *.hyp file before open Magnitudes window.</li>
</ol>
<p>If you place 0.00 on all parameters of local or coda magnitudes, the program will calculate these magnitude with default parameters as follows:</p>
<p>Coda Magnitude:</p>
<p>Values for California
a = 2.0; b = 0.0035; c= -0.87</p>
<p>Mc_value = a<em>np.log10(t_coda)+b</em>dist+c</p>
<p>Local Magnitude:</p>
<p>a = 1.11; b =0.00189; c= -2.09</p>
<p>ML_value = np.log10(max_amplitude)+a<em>np.log10(dist)+b</em>dist+c</p>
<p>Briefly, Once you have open the Magnitude Window, select the magnitudes you want to compute and run the computation.</p>
<p>In the upper panel it is shown the spectrum of the body waves and the fit to calculate the moment magnitude. In the bottom panel is shown the histograms of all magnitudes (the result of the magnitudes for all seismograms for all kind of magnitudes) and on the left an additional plot used to visualize the dispersion of the results.</p>
<p><img alt="Screenshot" src="../img/Magnitudes.png" /></p>
<h2 id="shortcuts">Shortcuts</h2>
<table>
<thead>
<tr>
<th>Shortcut</th>
<th align="left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>'Ctrl+L'</td>
<td align="left">Open Macro</td>
</tr>
<tr>
<td>'Ctrl+O'</td>
<td align="left">View Picks</td>
</tr>
<tr>
<td>'Ctrl+I'</td>
<td align="left">Deselect all</td>
</tr>
<tr>
<td>'Ctrl+J'</td>
<td align="left">Deselect a wave (Noise, Body, Surface)</td>
</tr>
<tr>
<td>'Ctrl+C'</td>
<td align="left">Clean events detected</td>
</tr>
<tr>
<td>'Ctrl+M'</td>
<td align="left">Open magnitudes calculator</td>
</tr>
<tr>
<td>'Ctrl+P'</td>
<td align="left">Open phases comboBox</td>
</tr>
<tr>
<td>'Ctrl+K'</td>
<td align="left">Save CFs (STA/LTA, Wavelet CF, Envelope, Entropy…)</td>
</tr>
<tr>
<td>'Ctrl+N'</td>
<td align="left">plot_all_seismograms</td>
</tr>
<tr>
<td>'Ctrl+B'</td>
<td align="left">stack_all_seismograms</td>
</tr>
<tr>
<td>'a'</td>
<td align="left">Compute individual spectrum</td>
</tr>
<tr>
<td>'s'</td>
<td align="left">Compute all spectrums</td>
</tr>
<tr>
<td>'z'</td>
<td align="left">Compute Spectrogram</td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tf/" class="btn btn-neutral float-right" title="Time-Frequency Analysis">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../install/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../install/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tf/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
